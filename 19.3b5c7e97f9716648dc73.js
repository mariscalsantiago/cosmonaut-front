(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{l9SM:function(o,a,e){"use strict";e.r(a),e.d(a,"empresasGrupoNominasModule",function(){return Q});var i=e("ofXK"),r=e("3Pt+"),n=e("HaJA"),t=e("tyNb"),d=e("fXoL"),l=e("9GDa"),s=e("04Ps"),c=e("For2"),b=e("t09X"),g=e("IhP3"),u=e("i9e2"),m=e("dkea");const p=["nombre"];function h(o,a){1&o&&(d.Tb(0,"div",29),d.Ic(1," Campo requerido "),d.Sb())}function f(o,a){if(1&o&&(d.Tb(0,"option",30),d.Ic(1),d.Sb()),2&o){const o=a.$implicit;d.kc("value",o.esquemaPagoId),d.zb(1),d.Kc("",o.descripcion," ")}}function I(o,a){1&o&&(d.Tb(0,"div",29),d.Ic(1," Campo requerido "),d.Sb())}function v(o,a){if(1&o&&(d.Tb(0,"option",30),d.Ic(1),d.Sb()),2&o){const o=a.$implicit;d.kc("value",o.centrocClienteId),d.zb(1),d.Jc(o.razonSocial)}}function S(o,a){1&o&&(d.Tb(0,"div",29),d.Ic(1," Campo requerido "),d.Sb())}function P(o,a){if(1&o&&(d.Tb(0,"option",30),d.Ic(1),d.Sb()),2&o){const o=a.$implicit;d.kc("value",o.clabe),d.zb(1),d.Jc(o.nombreCuenta)}}function C(o,a){1&o&&(d.Tb(0,"div",29),d.Ic(1," Campo requerido "),d.Sb())}function T(o,a){if(1&o&&(d.Tb(0,"option",30),d.Ic(1),d.Sb()),2&o){const o=a.$implicit;d.kc("value",o.monedaId),d.zb(1),d.Jc(o.descripcion)}}function k(o,a){1&o&&(d.Tb(0,"div",29),d.Ic(1," Campo requerido "),d.Sb())}function z(o,a){if(1&o&&(d.Tb(0,"option",30),d.Ic(1),d.Sb()),2&o){const o=a.$implicit;d.kc("value",o.periodicidadPagoId),d.zb(1),d.Jc(o.descripcion)}}function O(o,a){1&o&&(d.Tb(0,"div",29),d.Ic(1," Campo requerido "),d.Sb())}function w(o,a){if(1&o){const o=d.Ub();d.Tb(0,"div",5),d.Tb(1,"label",20),d.Ic(2,"Ajuste de ISR "),d.Tb(3,"input",31,32),d.ac("click",function(){d.yc(o);const a=d.vc(4);return d.ec().activar(a)}),d.Sb(),d.Ob(5,"span",22),d.Sb(),d.Sb()}}function N(o,a){1&o&&(d.Tb(0,"div",5),d.Tb(1,"label"),d.Ic(2,"Ajustar base gravable del mes de periodos ordinarios faltantes."),d.Sb(),d.Tb(3,"label",20),d.Ic(4,"S\xed "),d.Ob(5,"input",33),d.Ob(6,"span",24),d.Sb(),d.Tb(7,"label",20),d.Ic(8,"No "),d.Ob(9,"input",34),d.Ob(10,"span",24),d.Sb(),d.Sb())}function y(o,a){if(1&o&&(d.Tb(0,"option",30),d.Ic(1),d.Sb()),2&o){const o=a.$implicit;d.kc("value",o.basePeriodoId),d.zb(1),d.Jc(o.nombreCorto)}}function M(o,a){1&o&&(d.Tb(0,"div",29),d.Ic(1," Campo requerido "),d.Sb())}function x(o,a){if(1&o&&(d.Tb(0,"option",30),d.Ic(1),d.Sb()),2&o){const o=a.$implicit;d.kc("value",o.periodoAguinaldoId),d.zb(1),d.Jc(o.descripcion)}}function A(o,a){1&o&&(d.Tb(0,"div",29),d.Ic(1," Campo requerido "),d.Sb())}function G(o,a){1&o&&(d.Tb(0,"div",29),d.Ic(1," Campo requerido "),d.Sb())}const _=function(o){return{"is-invalid":o}};let q=(()=>{class o{constructor(o,a,e,i,r,n,t,d,l){this.formbuilder=o,this.activeprd=a,this.routerPrd=e,this.grupoNominaPrd=i,this.catalogosPrd=r,this.cuentasBancariasPrd=n,this.companiaPrd=t,this.usuariosSistemaPrd=d,this.modalPrd=l,this.submitInvalido=!1,this.esInsert=!1,this.id_empresa=0,this.activadoISR=!1,this.arregloEsquemaPago=[],this.arregloCuentasBancarias=[],this.arregloMonedas=[],this.arreglocompany=[],this.arregloPeriocidadPago=[],this.arregloBasePeriodos=[],this.arregloCatPeriodosAguinaldo=[]}ngOnInit(){this.activeprd.params.subscribe(o=>{this.id_empresa=o.id,"nuevo"==o.tipoinsert?this.esInsert=!0:"editar"==o.tipoinsert?this.esInsert=!1:this.routerPrd.navigate(["/empresa","detalle",this.id_empresa,"gruposnomina"]),this.cuentasBancariasPrd.getAllByEmpresa(this.id_empresa).subscribe(o=>this.arregloCuentasBancarias=o.datos),this.companiaPrd.getAllEmp(this.usuariosSistemaPrd.getIdEmpresa()).subscribe(o=>this.arreglocompany=o.datos)});let o={esquemaPagoId:{},monedaId:{},centrocClienteId:{},clabe:{},periodicidadPagoId:{},basePeriodoId:{},periodoAguinaldoId:{}};if(this.myForm=this.crearForm(o),!this.esInsert){if(o=history.state.data,null==o)return void this.routerPrd.navigate(["/empresa","detalle",this.id_empresa,"gruposnomina"]);this.grupoNominaPrd.getGroupNomina(o.id).subscribe(o=>{this.myForm=this.crearForm(o.datos)})}this.catalogosPrd.getEsquemaPago(!0).subscribe(o=>this.arregloEsquemaPago=o.datos),this.catalogosPrd.getMonedas(!0).subscribe(o=>this.arregloMonedas=o.datos),this.catalogosPrd.getPeriocidadPago(!0).subscribe(o=>this.arregloPeriocidadPago=o.datos),this.catalogosPrd.getBasePeriodos(!0).subscribe(o=>this.arregloBasePeriodos=o.datos),this.catalogosPrd.getCatPeriodoAguinaldo(!0).subscribe(o=>this.arregloCatPeriodosAguinaldo=o.datos)}ngAfterViewInit(){this.nombre.nativeElement.focus()}crearForm(o){var a,e,i,n,t,d,l;return this.esInsert?(o.centrocClienteId.centrocClienteId=this.id_empresa,o.maneraCalcularSubsidio=o.maneraCalcularSubsidio="periodica"):(console.log("Este es el obj",o),o.maneraCalcularSubsidio="P"==o.maneraCalcularSubsidio?"periodica":"diaria"),this.formbuilder.group({nombre:[o.nombre,[r.w.required]],esquemaPagoId:[null===(a=o.esquemaPagoId)||void 0===a?void 0:a.esquemaPagoId,[r.w.required]],monedaId:[null===(e=o.monedaId)||void 0===e?void 0:e.monedaId,[r.w.required]],centrocClienteId:[null===(i=o.centrocClienteId)||void 0===i?void 0:i.centrocClienteId,[r.w.required]],clabe:[null===(n=o.clabe)||void 0===n?void 0:n.clabe,[r.w.required]],periodicidadPagoId:[null===(t=o.periodicidadPagoId)||void 0===t?void 0:t.periodicidadPagoId,[r.w.required]],basePeriodoId:[null===(d=o.basePeriodoId)||void 0===d?void 0:d.basePeriodoId,[r.w.required]],periodoAguinaldoId:[null===(l=o.periodoAguinaldoId)||void 0===l?void 0:l.periodoAguinaldoId,[r.w.required]],isrAguinaldoReglamento:o.isrAguinaldoReglamento,maneraCalcularSubsidio:[o.maneraCalcularSubsidio,[r.w.required]],grupoNominaId:o.grupoNominaId})}enviarPeticion(){this.submitInvalido=!0,this.myForm.valid?this.modalPrd.showMessageDialog(this.modalPrd.warning,this.esInsert?"\xbfDeseas registrar un grupo de n\xf3mina?":"\xbfDeseas actualizar los datos del grupo de n\xf3mina?").then(o=>{if(o){let o=this.myForm.value,a={nombre:o.nombre,esAutomatica:o.esAutomatica,maneraCalcularSubsidio:"periodica"==o.maneraCalcularSubsidio?"P":"D",esquemaPagoId:{esquemaPagoId:o.esquemaPagoId},monedaId:{monedaId:o.monedaId},centrocClienteId:{centrocClienteId:this.id_empresa},clabe:{clabe:o.clabe},periodicidadPagoId:{periodicidadPagoId:o.periodicidadPagoId},basePeriodoId:{basePeriodoId:o.basePeriodoId},periodoAguinaldoId:{periodoAguinaldoId:o.periodoAguinaldoId},isrAguinaldoReglamento:o.isrAguinaldoReglamento};this.esInsert?this.grupoNominaPrd.save(a).subscribe(o=>{this.modalPrd.showMessageDialog(o.resultado,o.mensaje).then(()=>{o.resultado&&this.routerPrd.navigate(["/empresa","detalle",this.id_empresa,"gruposnomina"])})}):(a.grupoNominaId=o.grupoNominaId,this.grupoNominaPrd.modificar(a).subscribe(o=>{this.modalPrd.showMessageDialog(o.resultado,o.mensaje).then(()=>{o.resultado&&this.routerPrd.navigate(["/empresa","detalle",this.id_empresa,"gruposnomina"])})}))}}):this.modalPrd.showMessageDialog(this.modalPrd.error)}cancelar(){this.routerPrd.navigate(["/empresa/detalle",this.id_empresa,"gruposnomina"])}get f(){return this.myForm.controls}activar(o){this.activadoISR=o.checked}}return o.\u0275fac=function(a){return new(a||o)(d.Nb(r.c),d.Nb(t.a),d.Nb(t.e),d.Nb(l.a),d.Nb(s.a),d.Nb(c.a),d.Nb(b.a),d.Nb(g.a),d.Nb(u.a))},o.\u0275cmp=d.Hb({type:o,selectors:[["app-detallegruponomina"]],viewQuery:function(o,a){if(1&o&&d.Pc(p,!0),2&o){let o;d.uc(o=d.bc())&&(a.nombre=o.first)}},decls:84,vars:50,consts:[[1,"form-desing",3,"formGroup","ngSubmit"],["type","hidden","formControlName","grupoNominaId"],["appTamanioVentana","",1,"background-panel","margen","background-ajustar",3,"pixeles"],[1,"form-group","row","margen"],[1,"titulo"],[1,"input-group-sm","mb-3","col-12","col-sm-6","col-lg-6"],["formControlName","nombre","type","text","placeholder","",1,"form-control",3,"ngClass"],["nombre",""],["class","invalid-feedback",4,"ngIf"],["formControlName","esquemaPagoId",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["formControlName","centrocClienteId",1,"form-control","disabled",3,"ngClass"],["formControlName","clabe",1,"form-control",3,"ngClass"],["formControlName","monedaId",1,"form-control",3,"ngClass"],["formControlName","periodicidadPagoId",1,"form-control",3,"ngClass"],["periodopago",""],["class","input-group-sm mb-3 col-12 col-sm-6 col-lg-6",4,"ngIf"],["class","input-group-sm mb-3 col-12 col-sm-6 col-lg-6 ",4,"ngIf"],["formControlName","basePeriodoId",1,"form-control",3,"ngClass"],["formControlName","periodoAguinaldoId",1,"form-control",3,"ngClass"],[1,"contenedorInputCheckRadio"],["formControlName","isrAguinaldoReglamento","id","irsaguinaldo","type","checkbox"],[1,"checkmark"],["name","maneraCalcularSubsidio","formControlName","maneraCalcularSubsidio","type","radio","value","periodica",3,"ngClass"],[1,"radiomark"],["name","maneraCalcularSubsidio","formControlName","maneraCalcularSubsidio","type","radio","value","diaria",3,"ngClass"],[1,"text-center","margin",2,"margin-bottom","20px"],["type","button",1,"btn","btn-primary","button-outlet","mr-3",2,"color","red",3,"click"],["type","submit",1,"btn","btn-primary","button-fill","agrandarloading"],[1,"invalid-feedback"],[3,"value"],["type","checkbox","name","","id","ajusteirs",3,"click"],["ajusteisr",""],["checked","","type","radio","name","grupo1","id","sibasegravable"],["type","radio","name","grupo1","id","sibasegravable"]],template:function(o,a){if(1&o&&(d.Ob(0,"br"),d.Ob(1,"hr"),d.Tb(2,"form",0),d.ac("ngSubmit",function(){return a.enviarPeticion()}),d.Ob(3,"input",1),d.Tb(4,"div",2),d.Ob(5,"br"),d.Tb(6,"div",3),d.Tb(7,"label",4),d.Ic(8,"INFORMACI\xd3N DE GRUPOS DE N\xd3MINA"),d.Sb(),d.Sb(),d.Tb(9,"div",3),d.Tb(10,"div",5),d.Tb(11,"label"),d.Ic(12,"Nombre de grupo de n\xf3mina *"),d.Sb(),d.Ob(13,"input",6,7),d.Gc(15,h,2,0,"div",8),d.Sb(),d.Tb(16,"div",5),d.Tb(17,"label"),d.Ic(18,"Esquema para pago de n\xf3mina *"),d.Sb(),d.Tb(19,"select",9),d.Gc(20,f,2,2,"option",10),d.Sb(),d.Gc(21,I,2,0,"div",8),d.Sb(),d.Tb(22,"div",5),d.Tb(23,"label"),d.Ic(24,"Raz\xf3n social *"),d.Sb(),d.Tb(25,"select",11),d.Gc(26,v,2,2,"option",10),d.Sb(),d.Gc(27,S,2,0,"div",8),d.Sb(),d.Tb(28,"div",5),d.Tb(29,"label"),d.Ic(30,"Cuenta bancaria *"),d.Sb(),d.Tb(31,"select",12),d.Gc(32,P,2,2,"option",10),d.Sb(),d.Gc(33,C,2,0,"div",8),d.Sb(),d.Tb(34,"div",5),d.Tb(35,"label"),d.Ic(36,"Moneda *"),d.Sb(),d.Tb(37,"select",13),d.Gc(38,T,2,2,"option",10),d.Sb(),d.Gc(39,k,2,0,"div",8),d.Sb(),d.Tb(40,"div",5),d.Tb(41,"label"),d.Ic(42,"Periodo de n\xf3mina *"),d.Sb(),d.Tb(43,"select",14,15),d.Gc(45,z,2,2,"option",10),d.Sb(),d.Gc(46,O,2,0,"div",8),d.Sb(),d.Gc(47,w,6,0,"div",16),d.Gc(48,N,11,0,"div",17),d.Tb(49,"div",5),d.Tb(50,"label"),d.Ic(51,"Calcular periodo de n\xf3mina con base a *"),d.Sb(),d.Tb(52,"select",18),d.Gc(53,y,2,2,"option",10),d.Sb(),d.Gc(54,M,2,0,"div",8),d.Sb(),d.Tb(55,"div",5),d.Tb(56,"label"),d.Ic(57,"Periodo para pago de aguinaldo *"),d.Sb(),d.Tb(58,"select",19),d.Gc(59,x,2,2,"option",10),d.Sb(),d.Gc(60,A,2,0,"div",8),d.Sb(),d.Tb(61,"div",5),d.Tb(62,"label",20),d.Ic(63,"Calcular ISR de aguinaldo aplicando reglamento "),d.Ob(64,"input",21),d.Ob(65,"span",22),d.Sb(),d.Sb(),d.Tb(66,"div",5),d.Tb(67,"label"),d.Ic(68,"Calcular subsidio al empleo de manera :"),d.Sb(),d.Ob(69,"br"),d.Tb(70,"label",20),d.Ic(71,"Peri\xf3dica "),d.Ob(72,"input",23),d.Ob(73,"span",24),d.Sb(),d.Tb(74,"label",20),d.Ic(75,"Diaria "),d.Ob(76,"input",25),d.Ob(77,"span",24),d.Sb(),d.Gc(78,G,2,0,"div",8),d.Sb(),d.Sb(),d.Sb(),d.Tb(79,"div",26),d.Tb(80,"button",27),d.ac("click",function(){return a.cancelar()}),d.Ic(81,"Cancelar"),d.Sb(),d.Tb(82,"button",28),d.Ic(83,"Guardar"),d.Sb(),d.Sb(),d.Sb()),2&o){const o=d.vc(44);d.zb(2),d.kc("formGroup",a.myForm),d.zb(2),d.kc("pixeles",340),d.zb(9),d.kc("ngClass",d.oc(30,_,a.f.nombre.errors&&a.submitInvalido)),d.zb(2),d.kc("ngIf",a.submitInvalido&&a.f.nombre.errors),d.zb(4),d.kc("ngClass",d.oc(32,_,a.f.esquemaPagoId.errors&&a.submitInvalido)),d.zb(1),d.kc("ngForOf",a.arregloEsquemaPago),d.zb(1),d.kc("ngIf",a.submitInvalido&&a.f.esquemaPagoId.errors),d.zb(4),d.kc("ngClass",d.oc(34,_,a.f.centrocClienteId.errors&&a.submitInvalido)),d.zb(1),d.kc("ngForOf",a.arreglocompany),d.zb(1),d.kc("ngIf",a.submitInvalido&&a.f.centrocClienteId.errors),d.zb(4),d.kc("ngClass",d.oc(36,_,a.f.clabe.errors&&a.submitInvalido)),d.zb(1),d.kc("ngForOf",a.arregloCuentasBancarias),d.zb(1),d.kc("ngIf",a.submitInvalido&&a.f.clabe.errors),d.zb(4),d.kc("ngClass",d.oc(38,_,a.f.monedaId.errors&&a.submitInvalido)),d.zb(1),d.kc("ngForOf",a.arregloMonedas),d.zb(1),d.kc("ngIf",a.submitInvalido&&a.f.monedaId.errors),d.zb(4),d.kc("ngClass",d.oc(40,_,a.f.periodicidadPagoId.errors&&a.submitInvalido)),d.zb(2),d.kc("ngForOf",a.arregloPeriocidadPago),d.zb(1),d.kc("ngIf",a.submitInvalido&&a.f.periodicidadPagoId.errors),d.zb(1),d.kc("ngIf","04"==o.value),d.zb(1),d.kc("ngIf",a.activadoISR),d.zb(4),d.kc("ngClass",d.oc(42,_,a.f.basePeriodoId.errors&&a.submitInvalido)),d.zb(1),d.kc("ngForOf",a.arregloBasePeriodos),d.zb(1),d.kc("ngIf",a.submitInvalido&&a.f.basePeriodoId.errors),d.zb(4),d.kc("ngClass",d.oc(44,_,a.f.periodoAguinaldoId.errors&&a.submitInvalido)),d.zb(1),d.kc("ngForOf",a.arregloCatPeriodosAguinaldo),d.zb(1),d.kc("ngIf",a.submitInvalido&&a.f.periodoAguinaldoId.errors),d.zb(12),d.kc("ngClass",d.oc(46,_,a.f.maneraCalcularSubsidio.errors&&a.submitInvalido)),d.zb(4),d.kc("ngClass",d.oc(48,_,a.f.maneraCalcularSubsidio.errors&&a.submitInvalido)),d.zb(2),d.kc("ngIf",a.submitInvalido&&a.f.maneraCalcularSubsidio.errors)}},directives:[r.y,r.m,r.f,r.b,r.l,r.e,m.a,i.k,i.m,r.v,i.l,r.a,r.s,r.p,r.x],styles:[""]}),o})();var D=e("DpdX"),F=e("JBW2");function R(o,a){1&o&&d.Ob(0,"i",32)}function E(o,a){1&o&&d.Ob(0,"i",33)}function B(o,a){if(1&o){const o=d.Ub();d.Tb(0,"button",28),d.ac("click",function(){d.yc(o);const a=d.ec();return a.changeIconDown=!a.changeIconDown}),d.Tb(1,"label",29),d.Ic(2,"GRUPOS DE N\xd3MINA"),d.Sb(),d.Gc(3,R,1,0,"i",30),d.Gc(4,E,1,0,"i",31),d.Sb()}if(2&o){const o=d.ec();d.zb(3),d.kc("ngIf",o.changeIconDown),d.zb(1),d.kc("ngIf",!o.changeIconDown)}}function J(o,a){1&o&&(d.Tb(0,"button",34),d.Tb(1,"label",35),d.Ic(2,"GRUPOS DE N\xd3MINA"),d.Sb(),d.Sb())}function j(o,a){if(1&o&&(d.Tb(0,"option",36),d.Ic(1),d.Sb()),2&o){const o=a.$implicit;d.kc("value",o.centrocClienteId),d.zb(1),d.Kc("",o.razonSocial," ")}}function $(o,a){if(1&o&&(d.Tb(0,"option",36),d.Ic(1),d.Sb()),2&o){const o=a.$implicit;d.kc("value",o.periodicidadPagoId),d.zb(1),d.Kc("",o.descripcion," ")}}function U(o,a){1&o&&(d.Tb(0,"div",49),d.Ob(1,"img",50),d.Sb())}function W(o,a){if(1&o&&(d.Tb(0,"tr"),d.Tb(1,"td"),d.Ic(2),d.Sb(),d.Tb(3,"td"),d.Ic(4),d.Sb(),d.Tb(5,"td"),d.Ic(6),d.Sb(),d.Sb()),2&o){const o=a.$implicit;d.zb(2),d.Mc("",o.personaId.nombre," ",o.personaId.apellidoPaterno," ",o.personaId.apellidoMaterno," "),d.zb(2),d.Jc(o.numEmpleado),d.zb(2),d.Jc(o.centrocClienteId.razonSocial)}}function K(o,a){if(1&o&&(d.Tb(0,"div"),d.Tb(1,"table",51),d.Tb(2,"thead"),d.Tb(3,"tr"),d.Tb(4,"th",52),d.Ic(5,"Nombre de empleado"),d.Sb(),d.Tb(6,"th",52),d.Ic(7,"N\xfamero de empleado"),d.Sb(),d.Tb(8,"th",52),d.Ic(9,"Empresa"),d.Sb(),d.Sb(),d.Sb(),d.Tb(10,"tbody"),d.Gc(11,W,7,5,"tr",53),d.Sb(),d.Sb(),d.Sb()),2&o){const o=d.ec(2);d.zb(11),d.kc("ngForOf",o.arreglodetalle)}}function L(o,a){if(1&o){const o=d.Ub();d.Tb(0,"div",37),d.Tb(1,"div",38),d.Tb(2,"button",39),d.ac("click",function(){return d.yc(o),d.ec().aparecemodalito=!1}),d.Tb(3,"span",40),d.Ic(4,"\xd7"),d.Sb(),d.Sb(),d.Tb(5,"div",41),d.Tb(6,"h5",35),d.Ic(7,"GRUPO DE N\xd3MINA"),d.Sb(),d.Sb(),d.Ob(8,"hr"),d.Tb(9,"div",42),d.Gc(10,U,2,0,"div",43),d.Gc(11,K,12,1,"div",44),d.Sb(),d.Ob(12,"hr"),d.Tb(13,"div",45),d.Tb(14,"div",46),d.Tb(15,"div",47),d.Tb(16,"button",48),d.ac("click",function(){return d.yc(o),d.ec().aparecemodalito=!1}),d.Ic(17,"Cerrar"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb()}if(2&o){const o=d.ec();d.Dc("top",o.scrolly)("width",o.modalWidth),d.zb(10),d.kc("ngIf",o.cargandodetallegrupo),d.zb(1),d.kc("ngIf",!o.cargandodetallegrupo)}}const X=function(o){return{show:o}},H=[{path:"",children:[{path:"gruposnomina",component:(()=>{class o{constructor(o,a,e,i,r,n,t){this.gruposnominaPrd=o,this.routerPrd=a,this.routerActive=e,this.catalogosPrd=i,this.empresasPrd=r,this.usuariosSistemaPrd=n,this.modalPrd=t,this.tamanio=0,this.nombre="",this.razonsocial=-1,this.periodonomina="",this.changeIconDown=!1,this.cargando=!1,this.id_empresa=-1,this.aparecemodalito=!1,this.scrolly="5%",this.modalWidth="55%",this.cargandodetallegrupo=!1,this.indexSeleccionado=0,this.arreglo=[],this.arreglodetalle=[],this.arregloperiodo=[],this.arregloRazonSocial=[],this.arreglotabla={columnas:[],filas:[]},this.arreglotablaDesglose={columnas:[],filas:[]}}onResize(o){this.tamanio=o.target.innerWidth,this.modalWidth=this.tamanio<600?"90%":"55%"}ngOnInit(){let o=document.defaultView;this.tamanio=o.innerWidth,this.routerActive.params.subscribe(o=>{this.id_empresa=o.id,this.cargando=!0,this.gruposnominaPrd.filtrar({nombre:this.nombre,centrocClienteId:{centrocClienteId:this.id_empresa},periodicidadPagoId:{periodicidadPagoId:this.periodonomina}}).subscribe(o=>{this.preparandoTabla(o)}),this.catalogosPrd.getPeriocidadPago(!0).subscribe(o=>this.arregloperiodo=o.datos),this.empresasPrd.getAllEmp(this.usuariosSistemaPrd.getIdEmpresa()).subscribe(o=>this.arregloRazonSocial=o.datos),this.razonsocial=this.id_empresa})}preparandoTabla(o){this.arreglo=o.datos;let a=[new D.a("nombre","Nombre de grupo de n\xf3mina\t"),new D.a("razon","Raz\xf3n social"),new D.a("periodo","Per\xedodo de n\xf3mina"),new D.a("numero","N\xfamero de empleados",!0,!0)];if(this.arreglotabla={columnas:[],filas:[]},this.arreglotabla.columnas=a,this.arreglotabla.filas=this.arreglo,this.cargando=!1,null!=o.datos)for(let e of o.datos)e.seleccionado=!1,e.cargandoDetalle=!1;this.arreglo=o.datos,this.cargando=!1}filtrar(){let o={nombre:this.nombre,centrocClienteId:{centrocClienteId:this.razonsocial},periodicidadPagoId:{periodicidadPagoId:this.periodonomina}};this.cargando=!0,this.gruposnominaPrd.filtrar(o).subscribe(o=>{this.preparandoTabla(o),this.cargando=!1})}eliminar(o){this.indexSeleccionado=o,this.modalPrd.showMessageDialog(this.modalPrd.warning,"\xbfDeseas eliminar el grupo de n\xf3mina?").then(o=>{o&&this.gruposnominaPrd.eliminar(this.arreglo[this.indexSeleccionado].id).subscribe(o=>{this.modalPrd.showMessageDialog(o.resultado,o.mensaje),o.resultado&&(this.arreglo.splice(this.indexSeleccionado,1),this.preparandoTabla({datos:this.arreglo}))})})}verdetalle(o){null==o?this.routerPrd.navigate(["empresa/detalle",this.id_empresa,"gruposnomina","nuevo"]):this.routerPrd.navigate(["empresa/detalle",this.id_empresa,"gruposnomina","editar"],{state:{data:o}})}apagando(o){this.arreglo[o].cargandoDetalle=!0,this.gruposnominaPrd.getGroupNomina(this.arreglo[o].id).subscribe(a=>{let e=a.datos;if(null!=e)for(let i in e)this.arreglo[o][i]=e[i];console.log(this.arreglo[o]),this.arreglo[o].cargandoDetalle=!1});for(let a=0;a<this.arreglo.length;a++)a!=o&&(this.arreglo[a].seleccionado=!1);this.arreglo[o].seleccionado=!this.arreglo[o].seleccionado}traerModal(o){let a=document.getElementById("vetanaprincipaltabla");if(this.aparecemodalito=!0,a.getBoundingClientRect().y<-40){let o=a.getBoundingClientRect().y;o=Math.abs(o),this.scrolly=o+100+"px"}else this.scrolly="5%";this.modalWidth=this.tamanio<600?"90%":"55%";let e=this.arreglo[o];this.cargandodetallegrupo=!0,this.gruposnominaPrd.getGroupNominaEmpleado(e.id).subscribe(o=>{this.cargandodetallegrupo=!1,this.arreglodetalle=null==o.datos?[]:o.datos,console.log(o)})}recibirTabla(o){switch(o.type){case"columna":this.traerModal(o.indice);break;case"editar":this.verdetalle(o.datos);break;case"eliminar":this.eliminar(o.indice);break;case"desglosar":let a=o.datos;this.gruposnominaPrd.getGroupNomina(a.id).subscribe(o=>{var e,i,r;let n=o.datos;if(null!=n)for(let d in n)a[d]=n[d];let t=[new D.a("nombre","Nombre de grupo de n\xf3mina\t"),new D.a("esquemanombre","Esquema para pago de n\xf3mina"),new D.a("razon"," Raz\xf3n social"),new D.a("nombremoneda","Moneda"),new D.a("periodo","Periodo de n\xf3mina"),new D.a("nombremoneda","Moneda"),new D.a("baseperiododescripcion","Calcular periodo de n\xf3mina con base a:"),new D.a("periodoaguinaldodescripcion","Periodo para pago de aguinaldo"),new D.a("isrAguinaldoReglamentodescripcion","Calcular ISR de aguinaldo aplicando reglamento:"),new D.a("maneraCalcularSubsidiodescripcion","Calcular subsidio al empleo de manera:"),new D.a("nombremoneda","N\xf3mina autom\xe1tica")];a.esquemanombre=null===(e=a.esquemaPagoId)||void 0===e?void 0:e.descripcion,a.nombremoneda=null===(i=a.monedaId)||void 0===i?void 0:i.descripcion,a.baseperiododescripcion=null===(r=a.basePeriodoId)||void 0===r?void 0:r.basePeriodoId,a.periodoaguinaldodescripcion=a.periodoAguinaldoId.descripcion,a.isrAguinaldoReglamentodescripcion=a.isrAguinaldoReglamento?"Si":"No",a.maneraCalcularSubsidiodescripcion="P"==a.maneraCalcularSubsidio?"Peri\xf3dica":"Diaria",this.arreglotablaDesglose.columnas=t,this.arreglotablaDesglose.filas=a,a.cargandoDetalle=!1})}}}return o.\u0275fac=function(a){return new(a||o)(d.Nb(l.a),d.Nb(t.e),d.Nb(t.a),d.Nb(s.a),d.Nb(b.a),d.Nb(g.a),d.Nb(u.a))},o.\u0275cmp=d.Hb({type:o,selectors:[["app-listagruposnominas"]],hostBindings:function(o,a){1&o&&d.ac("resize",function(o){return a.onResize(o)},!1,d.xc)},decls:38,vars:17,consts:[[1,"scrooll-designempresa"],[1,"col-11","col-lg-11",2,"z-index","4"],["id","accordionFiltro"],["id","accordion"],[1,"card"],["id","headingOne",1,"card-header"],[1,"mb-0"],["style","width: 100%;","class","btn btn-link aparece-movil","data-toggle","collapse","data-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",3,"click",4,"ngIf"],["class","btn btn-link aparece-desktop-inline-block",4,"ngIf"],["id","collapseOne","aria-labelledby","headingOne","data-parent","#accordion",1,"collapse",2,"margin","-36px",3,"ngClass"],[1,"card-body"],[1,"form","group","row","margen"],[1,"input-group-sm","mb-3","col-12","col-sm-6","col-lg-4","col-xl-3"],["type","text","placeholder","Nombre grupo de n\xf3mina",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","","checked",""],[1,"input-group-sm","mb-3","text-center","col-12","col-sm-2"],["type","button",1,"btn","btn-primary","button-outlet",3,"click"],[1,"col-10"],["class","ventanaemergente",3,"top","width",4,"ngIf"],[1,"row",2,"margin","10px"],[1,"col-12","col-lg-12","text-right"],["type","button",1,"btn","btn-light","button-outlet",3,"click"],[1,"fa","fa-plus"],["id","vetanaprincipaltabla",1,"row","margen","margen-tabla","background-panel","scrooll",2,"position","relative"],[3,"datos","arreglotablaDesglose","editar","eliminar","desglosar","cargando","salida"],["data-toggle","collapse","data-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",1,"btn","btn-link","aparece-movil",2,"width","100%",3,"click"],[1,"titulo",2,"width","80%","float","left","text-align","left"],["data-toggle","collapse","data-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne","style","width: 10%;float: right;color:#00C1AF","class","fas fa-chevron-up ",4,"ngIf"],["data-toggle","collapse","data-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne","style","width: 10%;float: right;color:#00C1AF","class","fas fa-chevron-down ",4,"ngIf"],["data-toggle","collapse","data-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",1,"fas","fa-chevron-up",2,"width","10%","float","right","color","#00C1AF"],["data-toggle","collapse","data-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",1,"fas","fa-chevron-down",2,"width","10%","float","right","color","#00C1AF"],[1,"btn","btn-link","aparece-desktop-inline-block"],[1,"titulo"],[3,"value"],[1,"ventanaemergente"],[1,"adentro"],["type","button","data-dismiss","modal","aria-label","Close",1,"close","btnclosemodal",3,"click"],["aria-hidden","true"],[1,"header"],[1,"body"],["class","col text-center mb-5",4,"ngIf"],[4,"ngIf"],[1,"footer"],[1,"row"],[1,"col-12","text-center"],["type","submit",1,"btn","btn-primary","button-fill","agrandarloading",3,"click"],[1,"col","text-center","mb-5"],["width","60px","height","60px","src","assets/imgs/loading_nomina.gif","alt",""],[1,"table","m-3","table-hober","table-sm",2,"width","90%"],["scope","col"],[4,"ngFor","ngForOf"]],template:function(o,a){1&o&&(d.Tb(0,"div",0),d.Ob(1,"br"),d.Ob(2,"br"),d.Tb(3,"div",1),d.Tb(4,"div",2),d.Tb(5,"div",3),d.Tb(6,"div",4),d.Tb(7,"div",5),d.Tb(8,"h5",6),d.Gc(9,B,5,2,"button",7),d.Gc(10,J,3,0,"button",8),d.Sb(),d.Sb(),d.Tb(11,"div",9),d.Tb(12,"div",10),d.Tb(13,"div",11),d.Tb(14,"div",12),d.Tb(15,"input",13),d.ac("ngModelChange",function(o){return a.nombre=o}),d.Sb(),d.Sb(),d.Tb(16,"div",12),d.Tb(17,"select",14),d.ac("ngModelChange",function(o){return a.razonsocial=o}),d.Tb(18,"option",15),d.Ic(19,"Raz\xf3n social"),d.Sb(),d.Gc(20,j,2,2,"option",16),d.Sb(),d.Sb(),d.Tb(21,"div",12),d.Tb(22,"select",14),d.ac("ngModelChange",function(o){return a.periodonomina=o}),d.Tb(23,"option",17),d.Ic(24,"Per\xedodo de n\xf3mina"),d.Sb(),d.Gc(25,$,2,2,"option",16),d.Sb(),d.Sb(),d.Tb(26,"div",18),d.Tb(27,"button",19),d.ac("click",function(){return a.filtrar()}),d.Ic(28,"FILTRAR"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Tb(29,"div",20),d.Gc(30,L,18,6,"div",21),d.Sb(),d.Tb(31,"div",22),d.Tb(32,"div",23),d.Tb(33,"button",24),d.ac("click",function(){return a.verdetalle(void 0)}),d.Ob(34,"i",25),d.Ic(35," Agregar grupo de n\xf3mina "),d.Sb(),d.Sb(),d.Sb(),d.Tb(36,"div",26),d.Tb(37,"app-tablapaginado",27),d.ac("salida",function(o){return a.recibirTabla(o)}),d.Sb(),d.Sb(),d.Sb()),2&o&&(d.zb(9),d.kc("ngIf",a.tamanio<600),d.zb(1),d.kc("ngIf",a.tamanio>=600),d.zb(1),d.kc("ngClass",d.oc(15,X,a.tamanio>600)),d.zb(4),d.kc("ngModel",a.nombre),d.zb(2),d.kc("ngModel",a.razonsocial),d.zb(3),d.kc("ngForOf",a.arregloRazonSocial),d.zb(2),d.kc("ngModel",a.periodonomina),d.zb(3),d.kc("ngForOf",a.arregloperiodo),d.zb(5),d.kc("ngIf",a.aparecemodalito),d.zb(7),d.kc("datos",a.arreglotabla)("arreglotablaDesglose",a.arreglotablaDesglose)("editar",!0)("eliminar",!0)("desglosar",!0)("cargando",a.cargando))},directives:[i.m,i.k,r.b,r.l,r.o,r.v,r.p,r.x,i.l,F.a],styles:[".button-outlet[_ngcontent-%COMP%]{background-color:initial!important}table[_ngcontent-%COMP%]{border-radius:10px}.margen-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin:15px}td[_ngcontent-%COMP%]{color:#313131}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0 solid #000;margin-left:2px}.acomodando[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center}.botonmultiseleccion[_ngcontent-%COMP%]{margin:auto;height:59px}.agrandarloading[_ngcontent-%COMP%]{width:7em}.scrooll[_ngcontent-%COMP%]{overflow:auto}.btnPersonalizado[_ngcontent-%COMP%]{background-color:initial}.btnPersonalizado[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background-color:#00c1af!important}.contenedorDiv[_ngcontent-%COMP%]   .consulta[_ngcontent-%COMP%]{width:100%;height:auto;left:0}.ventanaemergente[_ngcontent-%COMP%]{z-index:1;display:block;overflow:auto;padding:4%;width:50%;border-radius:5px;border:1px solid #666;height:auto;background-color:#fff!important;box-shadow:5px 2px 5px 1px rgba(0,0,0,.42);left:5%;position:absolute}.ventanaemergente[_ngcontent-%COMP%]   .btnclosemodal[_ngcontent-%COMP%]{top:0!important;position:absolute!important;right:11px!important}.ventanaemergente[_ngcontent-%COMP%]   .btnclosemodal[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#56dfd4;font-size:x-large}"]}),o})()},{path:"gruposnomina/:tipoinsert",component:q}]}];let V=(()=>{class o{}return o.\u0275mod=d.Lb({type:o}),o.\u0275inj=d.Kb({factory:function(a){return new(a||o)},imports:[[t.i.forChild(H)]]}),o})(),Q=(()=>{class o{}return o.\u0275mod=d.Lb({type:o}),o.\u0275inj=d.Kb({factory:function(a){return new(a||o)},providers:[l.a],imports:[[i.c,r.g,r.u,V,n.a]]}),o})()}}]);